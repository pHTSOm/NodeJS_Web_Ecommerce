{"ast":null,"code":"// frontend/src/services/api.js\nimport axios from 'axios';\n\n// Create axios instance\nconst API = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:5000/api',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Add auth token to requests if available\nAPI.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => Promise.reject(error));\n\n// Auth API calls\nexport const AuthService = {\n  register: async userData => {\n    const response = await API.post('/auth/register', userData);\n    if (response.data.token) {\n      localStorage.setItem('token', response.data.token);\n      localStorage.setItem('user', JSON.stringify(response.data.user));\n    }\n    return response.data;\n  },\n  login: async credentials => {\n    const response = await API.post('/auth/login', credentials);\n    if (response.data.token) {\n      localStorage.setItem('token', response.data.token);\n      localStorage.setItem('user', JSON.stringify(response.data.user));\n    }\n    return response.data;\n  },\n  logout: () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n  },\n  getCurrentUser: () => {\n    return JSON.parse(localStorage.getItem('user'));\n  },\n  isLoggedIn: () => {\n    return localStorage.getItem('token') !== null;\n  },\n  isAdmin: () => {\n    try {\n      const userStr = localStorage.getItem('user');\n      if (!userStr) return false;\n      const user = JSON.parse(userStr);\n      return user && user.role === 'admin';\n    } catch (err) {\n      console.error('Error checking admin status:', err);\n      return false;\n    }\n  }\n};\n\n// Product API calls\nexport const ProductService = {\n  getAllProducts: async () => {\n    const response = await API.get('/products');\n    return response.data;\n  },\n  getProductById: async id => {\n    const response = await API.get(`/products/${id}`);\n    return response.data;\n  },\n  getProductsByCategory: async category => {\n    const response = await API.get(`/products/category/${category}`);\n    return response.data;\n  },\n  createProduct: async productData => {\n    const config = {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    };\n    try {\n      console.log(\"Sending request to:\", API.defaults.baseURL + '/products');\n      console.log(\"With headers:\", config.headers);\n      console.log(\"Form data keys:\", [...productData.keys()]);\n      const response = await API.post('/products', productData, config);\n      return response.data;\n    } catch (error) {\n      console.error(\"Full error details:\", error);\n      throw error;\n    }\n  },\n  updateProduct: async (id, productData) => {\n    const config = {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    };\n    const response = await API.put(`/products/${id}`, productData, config);\n    return response.data;\n  },\n  deleteProduct: async id => {\n    const response = await API.delete(`/products/${id}`);\n    return response.data;\n  },\n  getAdminProducts: async () => {\n    const response = await API.get('/products');\n    return response.data;\n  }\n};","map":{"version":3,"names":["axios","API","create","baseURL","process","env","REACT_APP_API_URL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","AuthService","register","userData","response","post","data","setItem","JSON","stringify","user","login","credentials","logout","removeItem","getCurrentUser","parse","isLoggedIn","isAdmin","userStr","role","err","console","ProductService","getAllProducts","get","getProductById","id","getProductsByCategory","category","createProduct","productData","log","defaults","keys","updateProduct","put","deleteProduct","delete","getAdminProducts"],"sources":["/Users/truongphat/Desktop/WebProgramming/midterm_web/frontend/src/services/api.js"],"sourcesContent":["// frontend/src/services/api.js\nimport axios from 'axios';\n\n// Create axios instance\nconst API = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:5000/api',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Add auth token to requests if available\nAPI.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\n// Auth API calls\nexport const AuthService = {\n  register: async (userData) => {\n    const response = await API.post('/auth/register', userData);\n    if (response.data.token) {\n      localStorage.setItem('token', response.data.token);\n      localStorage.setItem('user', JSON.stringify(response.data.user));\n    }\n    return response.data;\n  },\n  \n  login: async (credentials) => {\n    const response = await API.post('/auth/login', credentials);\n    if (response.data.token) {\n      localStorage.setItem('token', response.data.token);\n      localStorage.setItem('user', JSON.stringify(response.data.user));\n    }\n    return response.data;\n  },\n  \n  logout: () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n  },\n  \n  getCurrentUser: () => {\n    return JSON.parse(localStorage.getItem('user'));\n  },\n  \n  isLoggedIn: () => {\n    return localStorage.getItem('token') !== null;\n  },\n  \n  isAdmin: () => {\n  try {\n    const userStr = localStorage.getItem('user');\n    if (!userStr) return false;\n    const user = JSON.parse(userStr);\n    return user && user.role === 'admin';\n  } catch (err) {\n    console.error('Error checking admin status:', err);\n    return false;\n  }\n}\n};\n\n// Product API calls\nexport const ProductService = {\n  getAllProducts: async () => {\n    const response = await API.get('/products');\n    return response.data;\n  },\n  \n  getProductById: async (id) => {\n    const response = await API.get(`/products/${id}`);\n    return response.data;\n  },\n  \n  getProductsByCategory: async (category) => {\n    const response = await API.get(`/products/category/${category}`);\n    return response.data;\n  },\n  \n  createProduct: async (productData) => {\n    const config = {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      }\n    };\n    \n    try {\n      console.log(\"Sending request to:\", API.defaults.baseURL + '/products');\n      console.log(\"With headers:\", config.headers);\n      console.log(\"Form data keys:\", [...productData.keys()]);\n      \n      const response = await API.post('/products', productData, config);\n      return response.data;\n    } catch (error) {\n      console.error(\"Full error details:\", error);\n      throw error;\n    }\n  },\n  \n  updateProduct: async (id, productData) => {\n    const config = {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      }\n    };\n    \n    const response = await API.put(`/products/${id}`, productData, config);\n    return response.data;\n  },\n  \n  deleteProduct: async (id) => {\n    const response = await API.delete(`/products/${id}`);\n    return response.data;\n  },\n\n  getAdminProducts: async () => {\n    \n    const response = await API.get('/products');\n    return response.data;\n  },\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}